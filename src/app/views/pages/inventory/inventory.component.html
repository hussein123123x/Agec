<!-- صفحة إدارة المخزون -->
<c-card class="mb-4">
  <c-card-header class="d-flex justify-content-between align-items-center">
    <h5 class="mb-0">إدارة المخزون</h5>
    <div class="d-flex gap-2">
      <div class="input-group me-2">
        <input type="text" class="form-control" placeholder="بحث باسم المنتج أو الكود">
        <button class="btn btn-primary">بحث</button>
      </div>
      <button class="btn btn-dark">إضافة منتج</button>
      <button class="btn btn-dark">استيراد</button>
      <button class="btn btn-dark">تصدير</button>
      <button class="btn btn-dark">تحديث</button>
      <button class="btn btn-dark">طباعة</button>
    </div>
  </c-card-header>

  <c-card-body>
    <!-- الإحصائيات -->
    <c-row class="mb-4 text-center">
      <c-col sm="6" md="3">
        <c-widget-stat-c color="primary" value="150" [title]="'إجمالي الأصناف'" inverse>
          <ng-template cTemplateId="widgetIconTemplate">
            <svg cIcon name="cil-layers" height="36"></svg>
          </ng-template>
        </c-widget-stat-c>
      </c-col>
      <c-col sm="6" md="3">
        <c-widget-stat-c color="danger" value="12" [title]="'أصناف ناقصة'" inverse>
          <ng-template cTemplateId="widgetIconTemplate">
            <svg cIcon name="cil-warning" height="36"></svg>
          </ng-template>
        </c-widget-stat-c>
      </c-col>
      <c-col sm="6" md="3">
        <c-widget-stat-c color="success" value="30" [title]="'عدد المخازن'" inverse>
          <ng-template cTemplateId="widgetIconTemplate">
            <svg cIcon name="cil-home" height="36"></svg>
          </ng-template>
        </c-widget-stat-c>
      </c-col>
      <c-col sm="6" md="3">
        <c-widget-stat-c color="info" value="500" [title]="'إجمالي الحركات'" inverse>
          <ng-template cTemplateId="widgetIconTemplate">
            <svg cIcon name="cil-transfer" height="36"></svg>
          </ng-template>
        </c-widget-stat-c>
      </c-col>
    </c-row>

    <!-- جدول المنتجات -->
    <div class="table-responsive border">
      <table class="table table-hover table-striped align-middle mb-0">
        <thead class="table-dark">
          <tr>
            <th>الصورة</th>
            <th>الاسم</th>
            <th>الكود</th>
            <th>التصنيف</th>
            <th>الوحدة</th>
            <th>الكمية</th>
            <th>الحد الأدنى</th>
            <th>السعر</th>
            <th>الموقع</th>
            <th>الإجراءات</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of inventory">
            <td><img [src]="item.image" alt="" width="50" /></td>
            <td>{{ item.name }}</td>
            <td>{{ item.code }}</td>
            <td>{{ item.category }}</td>
            <td>{{ item.unit }}</td>
            <td>{{ item.quantity }}</td>
            <td>{{ item.min }}</td>
            <td>{{ item.price | currency:'EGP' }}</td>
            <td>{{ item.location }}</td>
            <td>
              <button class="btn btn-dark btn-sm" title="عرض"><svg cIcon name="cil-magnifying-glass" size="sm"></svg></button>
              <button class="btn btn-dark btn-sm" title="تعديل"><svg cIcon name="cil-pencil" size="sm"></svg></button>
              <button class="btn btn-dark btn-sm" title="حذف"><svg cIcon name="cil-trash" size="sm"></svg></button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </c-card-body>
</c-card>

<c-row class="mb-4">
  <!-- إجمالي الأصناف -->
  <c-col xs="12">
  <c-card>
    <c-card-header>
      <h5 class="mb-0">إجمالي الأصناف</h5>
    </c-card-header>
    <c-card-body>
      <c-row class="g-3">
        <c-col xs="12" sm="6" md="4" lg="3" xl="2" *ngFor="let item of totalProductsList">
          <c-card class="h-100 border">
            <c-card-body class="text-center p-3">
              <h6 class="mb-1">{{ item.name }}</h6>
              <p class="text-muted mb-1">كود: {{ item.code }}</p>
              <p class="mb-0"><strong>الكمية:</strong> {{ item.quantity }}</p>
              <p class="mb-0"><strong>السعر:</strong> {{ item.price | currency:'EGP' }}</p>
              <p class="mb-0"><strong>الفرع:</strong> {{ item.location }}</p>

            </c-card-body>
          </c-card>
        </c-col>
      </c-row>
    </c-card-body>
  </c-card>
</c-col>

  <!-- أصناف ناقصة -->
  <c-col xs="12">
  <c-card>
    <c-card-header>
      <h5 class="mb-0">أصناف ناقصة</h5>
    </c-card-header>
    <c-card-body>
      <c-row class="g-3">
        <c-col xs="12" sm="6" md="4" lg="3" xl="2" *ngFor="let item of lowStockItems">
          <c-card class="h-100 border border-danger-subtle">
            <c-card-body class="text-center p-3">
              <!-- <img [src]="item.image" alt="Low Stock Item" class="mb-2" style="width: 60px; height: 60px;" /> -->
              <h6 class="mb-1 text-danger">{{ item.name }}</h6>
              <p class="text-muted mb-1">كود: {{ item.code }}</p>
              <p class="mb-0"><strong>الكمية الحالية:</strong> {{ item.quantity }}</p>
              <p class="mb-0"><strong>الحد الأدنى:</strong> {{ item.min }}</p>
            </c-card-body>
          </c-card>
        </c-col>
      </c-row>
    </c-card-body>
  </c-card>
</c-col>

</c-row>


<c-card class="mb-4">
  <c-card-header>
    <h6 class="mb-0">تاريخ المعاملات على المخازن</h6>
  </c-card-header>
  <c-card-body class="table-responsive">
    <table class="table table-striped table-hover align-middle">
      <thead class="table-light">
        <tr>
          <th>التاريخ</th>
          <th>نوع المعاملة</th>
          <th>اسم المنتج</th>
          <th>الكمية</th>
          <th>المخزن</th>
          <th>المستخدم</th>
          <th>المشروع</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let transaction of transactionsHistory">
          <td>{{ transaction.date | date: 'short' }}</td>
          <td>{{ transaction.type }}</td>
          <td>{{ transaction.product }}</td>
          <td>{{ transaction.quantity }}</td>
          <td>{{ transaction.store }}</td>
          <td>{{ transaction.user }}</td>
          <td>{{ transaction.project }}</td>
        </tr>
      </tbody>
    </table>
  </c-card-body>
</c-card>
