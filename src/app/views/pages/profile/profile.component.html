
<div class="container my-4">
  <!-- ุฑุฃุณ ุงูุตูุญุฉ -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h4 class="text-primary fw-bold">ุงูุจูุงูุงุช ุงูุดุฎุตูุฉ</h4>
    <div class="d-flex gap-2">
      <button class="btn btn-outline-secondary" (click)="requestLeave()">
        ุชุนุฏูู ุงูุจูุงูุงุช
      </button>
    </div>
  </div>


  <div class="text-center mb-4" style="
      align-items: center;
      justify-content: center;
      display: flex;
      flex-direction: column;
    ">
    <div class="position-relative d-inline-block">
  <!-- ุตูุฑุฉ ุงูุจุฑููุงูู -->
  <img 
    [src]="profile.avatarUrl && profile.avatarUrl.length > 0 ? profile.avatarUrl : '../../../../assets/icons/user.png'" 
    class="rounded-circle border" 
    style="width: 120px; height: 120px; object-fit: cover; cursor: pointer;" 
    (click)="fileInput.click()"
  />

  <!-- ุฃููููุฉ ุงูููู ุชุธูุฑ ุนูุฏ hover -->
  <div 
    class="position-absolute top-50 start-52 translate-middle edit-icon"
  >
    <img src="../../../../assets/icons/pencil.png" style="width: 30px; height: 30px; margin-right: 20px;" alt="Edit">
  </div>

  <!-- input ูุฎูู ูุงุฎุชูุงุฑ ุงูุตูุฑุฉ -->
  <input 
    type="file" 
    accept="image/*" 
    #fileInput 
    style="display: none" 
    (change)="onFileSelected($event)" 
  />
</div>

    <h5 class="mt-2 fw-bold">{{ profile.fullNameArabic }}</h5>
    <p class="text-muted">{{ profile.role }}</p>
  </div>


  <div class="row mb-4 align-items-stretch">
    <div class="col-md-6 d-flex">
      <div class="card shadow-sm p-3 h-100 w-100">
        <h6 class="text-secondary fw-bold mb-3">ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ</h6>
        <p *ngIf="profile.phone">
          <strong>ุงููุงุชู:</strong> {{ profile.phone }}
        </p>
        <p *ngIf="profile.agecAccount">
          <strong>ุงูุจุฑูุฏ:</strong> {{ profile.agecAccount }}
        </p>
        <p *ngIf="profile.address">
          <strong>ุงูุนููุงู:</strong> {{ profile.address }}
        </p>
        <p *ngIf="profile.nationalId">
          <strong>ุงูุฑูู ุงููููู:</strong> {{ profile.nationalId }}
        </p>
      </div>
    </div>

    <div class="col-md-6 d-flex">
      <div class="card shadow-sm p-3 h-100 w-100">
        <h6 class="text-secondary fw-bold mb-3">ุจูุงูุงุช ุงูุนูู</h6>
        <p><strong>ุงุณู ุงูุงุฏุงุฑุฉ:</strong> {{ profile.departmentName }}</p>
        <p><strong>ุงููุธููุฉ:</strong> {{ profile.departmentRole }}</p>
        <p><strong>ุฏุฑุฌุฉ ุงูุนูููุฉ:</strong> {{ profile.educationLevel }}</p>
      </div>
    </div>
  </div>
</div>

<h4 class="text-primary fw-bold">ูุนูููุงุช ุงุถุงููุฉ</h4>

<div class="container mt-4" *ngIf="profile">
  <div class="card shadow-sm p-3">

    <div class="row">

      <!-- ุงูุนููุฏ ุงูุฃูุณุฑ -->
      <div class="col-md-6">
        <h5 class="fw-bold mb-2">ูุนูููุงุช ุงูุงุชุตุงู</h5>
        <p *ngIf="profile.additionalPhone"><strong>ุงููุงุชู ุงูุฅุถุงูู:</strong> {{ profile.additionalPhone }}</p>
        <p *ngIf="profile.facebookLink"><strong>ููุณุจูู:</strong> 
          <a [href]="profile.facebookLink" target="_blank">{{ profile.facebookLink }}</a>
        </p>

        <h5 class="fw-bold mt-3 mb-2">ุงูุฅุฌุงุฒุงุช</h5>
        <p *ngIf="profile.emergency_vacation_days"><strong>ุฃูุงู ุฅุฌุงุฒุฉ ุงูุทูุงุฑุฆ:</strong> {{ profile.emergency_vacation_days }}</p>
        <p *ngIf="profile.remaining_vacation_days"><strong>ุงูุฃูุงู ุงููุชุจููุฉ ูู ุงูุฅุฌุงุฒุฉ:</strong> {{ profile.remaining_vacation_days }}</p>

        <p *ngIf="profile.cvLink"><strong>ุงูุณูุฑุฉ ุงูุฐุงุชูุฉ:</strong> 
          <a [href]="profile.cvLink" target="_blank">ุนุฑุถ ุงูุณูุฑุฉ ุงูุฐุงุชูุฉ</a>
        </p>
      </div>

      <!-- ุงูุนููุฏ ุงูุฃููู -->
      <div class="col-md-6">
        <h5 class="fw-bold mb-2">ุงูุฎุจุฑุฉ</h5>
        <p *ngIf="profile.yearsOfExperience"><strong>ุณููุงุช ุงูุฎุจุฑุฉ:</strong> {{ profile.yearsOfExperience }}</p>
        <p *ngIf="profile.yearsInCompany"><strong>ุณููุงุช ุงูุนูู ุจุงูุดุฑูุฉ:</strong> {{ profile.yearsInCompany }}</p>
        <p *ngIf="profile.hasCar"><strong>ููุชูู ุณูุงุฑุฉ:</strong> ูุนู</p>

        <h5 class="fw-bold mt-3 mb-2">ุงูููุงุฑุงุช ูุงููุคููุงุช</h5>
        <p *ngIf="profile.languages?.length"><strong>ุงููุบุงุช:</strong> {{ profile.languages.join(', ') }}</p>
        <!-- <p *ngIf="profile.computerSkills?.length"><strong>ุงูููุงุฑุงุช ุงูุญุงุณูุจูุฉ:</strong> {{ profile.computerSkills.join(', ') }}</p> -->
        <p *ngIf="profile.courses?.length"><strong>ุงูุฏูุฑุงุช:</strong> {{ profile.courses.join(', ') }}</p>
        <div *ngIf="profile.certifications?.length">
          <h6 class="fw-bold">ุงูุดูุงุฏุงุช:</h6>
          <ul class="list-unstyled mb-0">
            <li *ngFor="let cert of profile.certifications">
              <strong>Title:</strong> {{ cert.title }} -
              <strong>Date:</strong> {{ cert.date }}
            </li>
          </ul>
        </div>        
        <p *ngIf="profile.educations?.length"><strong>ุงูุชุนููู:</strong> 
          <span *ngFor="let edu of profile.educations; let i = index">
            {{ edu.degree }} - {{ edu.institute }} ({{ edu.year }})<span *ngIf="i < profile.educations.length - 1">, </span>
          </span>
        </p>

        <h5 class="fw-bold mt-3 mb-2">ุงูุดุฑูุงุช ุงูุณุงุจูุฉ ูุงูููุงุญุธุงุช</h5>
        <p *ngIf="profile.lastCompanies?.length"><strong>ุงูุดุฑูุงุช ุงูุณุงุจูุฉ:</strong> {{ profile.lastCompanies.join(', ') }}</p>
        <p *ngIf="profile.notes"><strong>ููุงุญุธุงุช:</strong> {{ profile.notes }}</p>
      </div>

    </div>
    
  </div>
</div>


<br />
<br />

<div *ngIf="!emptyReport"  class="d-flex flex-wrap gap-2 align-items-center flex-grow-1 justify-content-between">
  <h5 class="text-primary fw-bold mt-4 mb-3">ุชุญุฏูุฏ ุงููุฏุฉ ุงูุฒูููุฉ</h5>
  <mat-form-field appearance="fill" class="w-42">
    <mat-date-range-input [formGroup]="range" [rangePicker]="picker">
      <input matStartDate formControlName="start" placeholder="ูู ุชุงุฑูุฎ" />
      <input matEndDate formControlName="end" placeholder="ุฅูู ุชุงุฑูุฎ" />
    </mat-date-range-input>
    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
    <mat-date-range-picker #picker>
      <mat-datepicker-actions>
        <div class="d-flex justify-content-between mt-3 px-3 pb-2">
          <button matDatepickerCancel class="btn btn-sm btn-outline-secondary">
            ุฅูุบุงุก
          </button>
          <button matDatepickerApply class="btn btn-sm btn-primary" (click)="applyDateFilter()">
            ุชุทุจูู
          </button>
        </div>
      </mat-datepicker-actions>
    </mat-date-range-picker>
  </mat-form-field>
</div>

<div class="container mt-4" *ngIf="!emptyReport">

  <!-- ุงูุชุฃุฎูุฑ -->
  <div class="row g-3 mb-4" *ngIf="userReport?.cameLate?.length > 0">
    <div class="col-md-6">
      <div class="card shadow-sm">
        <div class="card-header bg-primary text-white fw-bold">ุงูุชุฃุฎูุฑ</div>
        <div class="card-body p-0">
          <table class="table table-striped mb-0 text-center">
            <thead class="table-light">
              <tr>
                <th>ุงูุชุงุฑูุฎ</th>
                <th>ุงูุฏูุงุฆู</th>
                <th>ุงูุณุงุนุงุช</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of userReport?.cameLate">
                <td>{{ item.date }}</td>
                <td>{{ item.minutes }}</td>
                <td>{{ item.formatted }}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <div class="card shadow-sm">
        <div class="card-header bg-warning text-dark fw-bold">ุงูุงูุตุฑุงู ุงููุจูุฑ</div>
        <div class="card-body p-0">
          <table class="table table-striped mb-0 text-center">
            <thead class="table-light">
              <tr>
                <th>ุงูุชุงุฑูุฎ</th>
                <th>ุงูุฏูุงุฆู</th>
                <th>ุงูุณุงุนุงุช</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of userReport?.leaveEarly">
                <td>{{ item.date }}</td>
                <td>{{ item.minutes }}</td>
                <td>{{ item.formatted }}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <!-- ุงูุงูุตุฑุงู ุงููุจูุฑ -->
  <div class="row g-3 mb-4" *ngIf="userReport?.leaveEarly?.length > 0">
  </div>

  <!-- ุฃูุงู ุงูุบูุงุจ -->
  <div class="row g-3 mb-4" *ngIf="userReport?.absences?.length > 0">
    <div class="col-md-12">
      <div class="card shadow-sm">
        <div class="card-header bg-danger text-white fw-bold">ุฃูุงู ุงูุบูุงุจ</div>
        <div class="card-body">
          <span class="badge bg-danger mx-1" *ngFor="let a of userReport?.absences">{{ a }}</span>
        </div>
      </div>
    </div>
  </div>

  <!-- ุงูุนูู ูู ุงูุนุทูุงุช -->
  <div class="row g-3 mb-4" *ngIf="userReport?.holidayWork?.length > 0">
    <div class="col-md-12">
      <div class="card shadow-sm">
        <div class="card-header bg-success text-white fw-bold">ุงูุนูู ูู ุงูุนุทูุงุช</div>
        <div class="card-body p-0">
          <table class="table table-striped mb-0 text-center">
            <thead class="table-light">
              <tr>
                <th>ุงูุชุงุฑูุฎ</th>
                <th>ุณุงุนุงุช ุงูุนูู</th>
                <th>ุณุนุฑ ุงูุณุงุนุฉ</th>
                <th>ุงูููุนุงูู</th>
                <th>ุงูุฅุฌูุงูู</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of userReport?.holidayWork">
                <td>{{ item.date }}</td>
                <td>{{ item.workedHours }}</td>
                <td>{{ item.hourRate }}</td>
                <td>{{ item.payMultiplier }}</td>
                <td>{{ item.totalPay }}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <!-- ุฃูุงู ุงููุฑุงุฌุนุฉ -->
  <div class="row g-3 mb-4" *ngIf="userReport?.reviewDays?.length > 0">
    <div class="col-md-12">
      <div class="card shadow-sm">
        <div class="card-header bg-secondary text-white fw-bold">ุฃูุงู ุงููุฑุงุฌุนุฉ</div>
        <div class="card-body p-0">
          <table class="table table-striped mb-0 text-center">
            <thead class="table-light">
              <tr>
                <th>ุงูุชุงุฑูุฎ</th>
                <th>ุงูุณุจุจ</th>
                <th>ุงูุณุฌูุงุช</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of userReport?.reviewDays">
                <td>{{ item.date }}</td>
                <td>{{ item.reason }}</td>
                <td>
                  <div *ngFor="let log of item.rawLogs" class="small text-muted">
                    <strong>{{ log.type }}:</strong> {{ log.timestamp }}
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <!-- ุงูุนูู ุงูุฅุถุงูู -->
  <div class="row g-3 mb-4" *ngIf="userReport?.overTime?.length > 0">
    <div class="col-md-12">
      <div class="card shadow-sm">
        <div class="card-header bg-info text-white fw-bold">ุงูุนูู ุงูุฅุถุงูู</div>
        <div class="card-body">
          <div *ngFor="let ot of userReport?.overTime" class="mb-3">
            <h6 class="fw-bold text-primary">ุงูุชุงุฑูุฎ: {{ ot.date }}</h6>
            <table class="table table-bordered text-center">
              <thead>
                <tr>
                  <th>ุฑูู ุงููุฑุฏูุฉ</th>
                  <th>ุงูุณุงุนุงุช</th>
                  <th>ุงูุณุงุนุงุช ุงูููุฒููุฉ</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let s of ot.shifts">
                  <td>{{ s.shiftNum }}</td>
                  <td>{{ s.hours }}</td>
                  <td>{{ s.weightedHours }}</td>
                </tr>
              </tbody>
            </table>
            <div class="alert alert-info">ุฅุฌูุงูู ุงูุฃุฌุฑ: {{ ot.totalPay }}</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ุงููุฌุงููุน -->
  <div class="row g-3 mb-4" *ngIf="userReport?.totals && (
      userReport?.totals.cameLateHours ||
      userReport?.totals.leaveEarlyHours ||
      userReport?.totals.overTimeHours ||
      userReport?.totals.overTimeWeightedHours ||
      userReport?.totals.overTimePay ||
      userReport?.totals.holidayWorkHours ||
      userReport?.totals.holidayWorkPay
    )">
    <div class="col-md-12">
      <div class="card shadow-sm">
        <div class="card-header bg-dark text-white fw-bold">ุงูุฅุฌูุงููุงุช</div>
        <div class="card-body">
          <ul class="list-group">
            <li class="list-group-item d-flex justify-content-between">
              <span>ุณุงุนุงุช ุงูุชุฃุฎูุฑ:</span> <strong>{{ userReport?.totals.cameLateHours }}</strong>
            </li>
            <li class="list-group-item d-flex justify-content-between">
              <span>ุณุงุนุงุช ุงูุงูุตุฑุงู ุงููุจูุฑ:</span> <strong>{{ userReport?.totals.leaveEarlyHours }}</strong>
            </li>
            <li class="list-group-item d-flex justify-content-between">
              <span>ุณุงุนุงุช ุงูุฅุถุงูู:</span> <strong>{{ userReport?.totals.overTimeHours }}</strong>
            </li>
            <li class="list-group-item d-flex justify-content-between">
              <span>ุงูุณุงุนุงุช ุงูููุฒููุฉ:</span> <strong>{{ userReport?.totals.overTimeWeightedHours }}</strong>
            </li>
            <li class="list-group-item d-flex justify-content-between">
              <span>ุฃุฌุฑ ุงูุฅุถุงูู:</span> <strong>{{ userReport?.totals.overTimePay }}</strong>
            </li>
            <li class="list-group-item d-flex justify-content-between">
              <span>ุณุงุนุงุช ุงูุนูู ูู ุงูุนุทูุงุช:</span> <strong>{{ userReport?.totals.holidayWorkHours }}</strong>
            </li>
            <li class="list-group-item d-flex justify-content-between">
              <span>ุฃุฌุฑ ุงูุนูู ูู ุงูุนุทูุงุช:</span> <strong>{{ userReport?.totals.holidayWorkPay }}</strong>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <!-- KPI -->
  <div class="row g-3 mb-4" *ngIf="userReport?.kpis && userReport?.kpis.score !== 0">
    <div class="col-md-12">
      <div class="card shadow-sm">
        <div class="card-header bg-primary text-white fw-bold">ูุคุดุฑุงุช ุงูุฃุฏุงุก (KPI)</div>
        <div class="card-body">
          <ul class="list-group">
            <li class="list-group-item d-flex justify-content-between"><span>ุบูุงุจ:</span> <strong>{{ userReport?.kpis.absenceKpi }}</strong></li>
            <li class="list-group-item d-flex justify-content-between"><span>ุฌุฒุงุกุงุช:</span> <strong>{{ userReport?.kpis.penaltiesKpi }}</strong></li>
            <li class="list-group-item d-flex justify-content-between"><span>ุงูุชุฃุฎูุฑ:</span> <strong>{{ userReport?.kpis.lateKpi }}</strong></li>
            <li class="list-group-item d-flex justify-content-between"><span>ุงูุงูุตุฑุงู ุงููุจูุฑ:</span> <strong>{{ userReport?.kpis.earlyKpi }}</strong></li>
            <li class="list-group-item d-flex justify-content-between"><span>ุงููุชูุฌุฉ ุงูููุงุฆูุฉ:</span> 
              <strong class="text-danger">{{ userReport?.kpis.score }}</strong>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <!-- ุงูุฃุญุฏุงุซ -->
  <div class="row g-3 mb-4" *ngIf="userReport?.events?.length > 0">
    <div class="col-md-12">
      <div class="card shadow-sm">
        <div class="card-header bg-warning text-dark fw-bold">ุงูุฃุญุฏุงุซ</div>
        <div class="card-body">
          <div *ngFor="let e of userReport?.events" class="alert alert-warning">
            <strong>{{ e.type }} - {{ e.date }}</strong><br>
            {{ e.description }}
          </div>
        </div>
      </div>
    </div>
  </div>

</div>



<!-- <h5 class="text-primary fw-bold mt-4 mb-3">ุงูุงุฌุงุฒุงุช</h5>
<div class="row mb-4">
  <div class="col-md-6">
    <div class="card shadow-sm p-3">
      <h6 class="text-secondary fw-bold mb-3">ุงูุฅุฌุงุฒุงุช</h6>
      <p><strong>ุฑุตูุฏ ุงูุฅุฌุงุฒุงุช:</strong> {{ profile.leaveBalance }} ููู</p>
      <div *ngIf="profile.upcomingLeaves.length">
        <h6 class="text-muted small">ุฅุฌุงุฒุงุช ูุงุฏูุฉ:</h6>
        <ul class="list-unstyled">
          <li *ngFor="let leave of profile.upcomingLeaves">
            ๐ {{ leave.date }} - {{ leave.reason }}
          </li>
        </ul>
      </div>
    </div>
  </div>

  <div class="col-md-3">
    <div class="card shadow-sm p-3">
      <h6 class="text-secondary fw-bold mb-3">ุงูุบูุงุจุงุช</h6>
      <p><strong>ุนุฏุฏ ุฃูุงู ุงูุบูุงุจ:</strong> {{ profile.delays }} ููู</p>
      <div *ngIf="profile.absentsDays.length">
        <h6 class="text-muted small">ุฅุฌุงุฒุงุช ูุงุฏูุฉ:</h6>
        <ul class="list-unstyled">
          <li *ngFor="let leave of profile.absentsDays">
            ๐ {{ leave.date }} - {{ leave.reason }}
          </li>
        </ul>
      </div>
    </div>
  </div>

  <div class="col-md-3">
    <div class="card shadow-sm p-3">
      <h6 class="text-secondary fw-bold mb-3">ุงูุชุฃุฎูุฑุงุช</h6>
      <p><strong>ุนุฏุฏ ุฃูุงู ุงูุชุฃุฎูุฑ:</strong> {{ profile.delays }} ููู</p>
      <div *ngIf="profile.upcomingLeaves.length">
        <h6 class="text-muted small">ุงูุงู ุงูุชุฃุฎูุฑ:</h6>
        <ul class="list-unstyled">
          <li *ngFor="let leave of profile.delaysDays">
            ๐ {{ leave.date }} - {{ leave.reason }}
          </li>
        </ul>
      </div>
    </div>
  </div>
</div> -->

<!-- <h5 class="text-primary fw-bold mt-4 mb-3">ุงูุฑุงุชุจ ูุงูุญูุงูุฒ</h5> -->

<!-- <div class="row">
  <div class="col-md-6 mb-4">
    <div class="card shadow-sm p-3 h-100">
      <h6 class="text-secondary fw-bold mb-3">ุงูุณูู ูู ุงูุฑุงุชุจ</h6>

      <p><strong>ุงูุฑุงุชุจ ุงูุดูุฑู:</strong> {{ profile.salary }} ุฌููู</p>
      <p><strong>ุฅุฌูุงูู ุงูุณูู:</strong> {{ getTotalLoans() }} ุฌููู</p>
      <p>
        <strong>ุงููุชุจูู ูู ุงูุฑุงุชุจ:</strong>
        {{ profile.salary - getTotalLoans() }} ุฌููู
      </p>

      <div class="progress mb-3" style="height: 20px">
        <div class="progress-bar bg-success" role="progressbar" [style.width.%]="getRemainingSalaryPercentage()"
          aria-valuemin="0" aria-valuemax="100">
          {{ getRemainingSalaryPercentage() }}%
        </div>
      </div>

      <hr />

      <table class="table table-sm table-bordered">
        <thead class="table-light">
          <tr>
            <th>ุงูุชุงุฑูุฎ</th>
            <th>ุงููุจูุบ</th>
            <th>ุงูุญุงูุฉ</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let loan of profile.loans">
            <td>{{ loan.date }}</td>
            <td>{{ loan.amount }} ุฌููู</td>
            <td>
              <span [ngClass]="{
                  'text-success': loan.status === 'ูุฏููุนุฉ',
                  'text-danger': loan.status !== 'ูุฏููุนุฉ'
                }">{{ loan.status }}</span>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <div class="col-md-6 mb-4">
    <div class="card shadow-sm p-3 h-100">
      <h6 class="text-secondary fw-bold mb-3">ุณุฌู ุงูุญูุงูุฒ ูุงูููุงูุขุช</h6>

      <p><strong>ุฅุฌูุงูู ุงูุญูุงูุฒ:</strong> {{ getTotalBonuses() }} ุฌููู</p>

      <table class="table table-sm table-striped">
        <thead class="table-light">
          <tr>
            <th>ุงูุชุงุฑูุฎ</th>
            <th>ุงููุตู</th>
            <th>ุงููููุฉ</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let bonus of profile.bonuses">
            <td>{{ bonus.date }}</td>
            <td>{{ bonus.title }}</td>
            <td>{{ bonus.amount }} ุฌููู</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <div class="col-md-6 mb-4">
    <div class="card shadow-sm p-3 h-100">
      <h6 class="text-secondary fw-bold mb-3">ุณุฌู ุงูุฎุตููุงุช ูุงูุฌุฒุงุกุงุช</h6>

      <p><strong>ุฅุฌูุงูู ุงูุฎุตููุงุช:</strong> {{ getDeductionsTotal() }} ุฌููู</p>

      <table class="table table-sm table-striped">
        <thead class="table-light">
          <tr>
            <th>ุงูุชุงุฑูุฎ</th>
            <th>ุงูุณุจุจ</th>
            <th>ุงููููุฉ</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let d of profile.deductions">
            <td>{{ d.date }}</td>
            <td>{{ d.reason }}</td>
            <td class="text-danger">-{{ d.amount }} ุฌููู</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <h5 class="text-primary fw-bold mt-4 mb-3">ุงูุงุญุฏุงุซ</h5>

  <div class="col-md-6 mb-4">
    <div class="card shadow-sm p-3 h-100">
      <h6 class="text-secondary fw-bold mb-3">ุณุฌู ุงูุญุถูุฑ ูุงููุฃููุฑูุงุช</h6>

      <p>
        <strong>ุฅุฌูุงูู ุงูุฃุญุฏุงุซ:</strong> {{ profile.events?.length || 0 }} ุญุฏุซ
      </p>

      <table class="table table-sm table-striped">
        <thead class="table-light">
          <tr>
            <th>ุงูุชุงุฑูุฎ</th>
            <th>ุงูููุน</th>
            <th>ุงูุชูุงุตูู</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let e of profile.events">
            <td>{{ e.date }}</td>
            <td>
              <span [ngClass]="{
                  'text-success': e.type === 'ุญุถูุฑ',
                  'text-primary': e.type === 'ูุฃููุฑูุฉ',
                  'text-warning': e.type === 'ุงูุตุฑุงู ูุจูุฑ'
                }">
                {{ e.type }}
              </span>
            </td>
            <td>{{ e.details }}</td>
          </tr>
        </tbody>
      </table>
      <h6 class="text-danger">
        ุธููุฑ ูู ุตูุญุฉ ุงูุงุญุฏุงุซ ุนูุฏ ุงูุชุงุฎูุฑ ุงู ุงูุฑุญูู ูุจูุฑุง ุจุนุฏ ุงูุณุงุนุฉ 7:30 ู
        ุงูุฑุญูู ุจุนุฏ ุงูุณุงุนุฉ 4
      </h6>
    </div>
  </div>
</div> -->

<!-- --------------- -->

<!-- <h5 class="text-primary fw-bold mt-4 mb-3">ุงููุนูููุงุช ุงูุฅุถุงููุฉ</h5>
<div class="row mb-4">

  <div class="col-md-6">
    <div class="card shadow-sm p-3">
      <h6 class="text-secondary fw-bold mb-3">ูุนูููุงุช ุดุฎุตูุฉ</h6>

      <p *ngIf="profile.maritalStatus"><strong>ุงูุญุงูุฉ ุงูุงุฌุชูุงุนูุฉ:</strong> {{ profile?.maritalStatus }}</p>

      <div *ngIf="profile.family?.length">
        <h6 class="text-muted small my-2">๐จโ๐ฉโ๐งโ๐ฆ ุฃูุฑุงุฏ ุงูุนุงุฆูุฉ:</h6>
        <div class="d-flex flex-wrap gap-3">
          <span *ngFor="let member of profile.family" class="border rounded px-2 py-1 bg-light">
            <strong>{{ member.name }}</strong>
            <span *ngIf="member.relation || member.realtion">
              ({{ member.relation || member.realtion }})
            </span>
            <span *ngIf="member.phone">
              - ๐ {{ member.phone }}
            </span>
          </span>
        </div>
      </div>



      <div *ngIf="profile.residence">
        <h6 class="text-muted small">ุนููุงู ุงูุณูู:</h6>
        <p>
          {{ profile?.residence?.address }}
        </p>
      </div>
    </div>
  </div>

  <div class="col-md-6" *ngIf="profile.languages.length > 0 || profile.certifications.length > 0 ">
    <div class="card shadow-sm p-3">
      <h6 class="text-secondary fw-bold mb-3">ุงูุดูุงุฏุงุช ู ุงููุบุงุช</h6>
      <div *ngIf="profile.languages?.length">
        <h6 class="text-muted small mt-3">ุงููุบุงุช ุงูููุชุณุจุฉ:</h6>
        <p>{{ profile.languages.join('ุ ') }}</p>
      </div>
      <div *ngIf="profile.certifications?.length">
        <h6 class="text-muted small mt-3">ุงูุดูุงุฏุงุช ูุงูุฏูุฑุงุช:</h6>
        <ul class="list-unstyled">
          <li *ngFor="let cert of profile.certifications">
            ๐ {{ cert.title }} - {{ cert.date }}
          </li>
        </ul>
      </div>

      
    </div>
  </div>

  

</div>
<h6 class="text-secondary fw-bold mb-3">ุงูุจูุงูุงุช ุงูููููุฉ</h6>
<p><strong>ุงูุญุงูุฉ ุงูุชุฃููููุฉ:</strong> {{ profile.insuranceStatus }}</p>
<p><strong>ุงูุฏุฑุฌุฉ ุงูุนูููุฉ:</strong> {{ profile.educationLevel }}</p>
 -->