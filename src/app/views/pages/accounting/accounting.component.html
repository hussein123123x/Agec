<!-- ุนููุงู ุฑุฆูุณู -->
<h3 class="mb-4">๐  ุฅุฏุงุฑุฉ ุงูุญุณุงุจุงุช ูุงูุชูุงููู</h3>

<!-- ุฅุญุตุงุฆูุงุช ุนููุง -->
<c-row class="mb-4 text-center">
  <c-col sm="6" md="4">
    <c-widget-stat-c color="success" [value]="totalRevenue" title="ุฅุฌูุงูู ุงูุฅูุฑุงุฏุงุช" inverse></c-widget-stat-c>
  </c-col>
  <c-col sm="6" md="4">
    <c-widget-stat-c color="danger" [value]="totalExpenses" title="ุฅุฌูุงูู ุงููุตุฑููุงุช" inverse></c-widget-stat-c>
  </c-col>
  <c-col sm="6" md="4">
    <c-widget-stat-c [color]="netProfit >= 0 ? 'primary' : 'warning'" [value]="netProfit" title="ุตุงูู ุงูุฑุจุญ / ุงูุฎุณุงุฑุฉ" inverse></c-widget-stat-c>
  </c-col>
</c-row>

<c-row class="mb-4 text-center">
  <c-col sm="6" md="4">
    <c-widget-stat-c color="info" [value]="cashBalance" title="ุงูุฑุตูุฏ ุงูููุฏู ุงูุญุงูู" inverse></c-widget-stat-c>
  </c-col>
  <c-col sm="6" md="4">
    <c-widget-stat-c color="secondary" [value]="debtAccounts" title="ุงูุญุณุงุจุงุช ุงููุฏููุฉ" inverse></c-widget-stat-c>
  </c-col>
  <c-col sm="6" md="4">
    <c-widget-stat-c color="dark" [value]="creditAccounts" title="ุงูุญุณุงุจุงุช ุงูุฏุงุฆูุฉ" inverse></c-widget-stat-c>
  </c-col>
</c-row>


<c-card-body>
    <c-row>
      <c-col sm="5">
        <h4 class="card-title mb-0" id="traffic">ููุฎุต ูุงูู</h4>
        <div class="small text-body-secondary">January - December 2025</div>
      </c-col>
      <c-col class="d-none d-md-block" sm="7">
        <button cButton class="float-end" color="primary" aria-label="Download">
          <svg cIcon name="cilCloudDownload"></svg>
        </button>
        <form [formGroup]="trafficRadioGroup">
          <c-button-group class="float-end me-3" role="group">
            <input
              class="btn-check"
              formControlName="trafficRadio"
              type="radio"
              value="Day"
              id="dayRadio"
            />
            <label
              (click)="setTrafficPeriod('week')"
              cButton
              cFormCheckLabel
              color="secondary"
              variant="outline"
              for="dayRadio"
            >
              ุงุณุจูุนู
            </label>
            <input
              class="btn-check"
              formControlName="trafficRadio"
              type="radio"
              value="Month"
              id="radioMonth"
            />
            <label
              (click)="setTrafficPeriod('Month')"
              cButton
              cFormCheckLabel
              color="secondary"
              variant="outline"
              for="radioMonth"
            >
              ุดูุฑู
            </label>
            <input
              class="btn-check"
              formControlName="trafficRadio"
              type="radio"
              value="Year"
              id="radioYear"
            />
            <label
              (click)="setTrafficPeriod('Year')"
              cButton
              cFormCheckLabel
              color="secondary"
              variant="outline"
              for="radioYear"
            >
              ุณููู
            </label>
          </c-button-group>
        </form>
      </c-col>
    </c-row>
    <c-chart
      [data]="mainChart.data"
      [height]="300"
      [ngStyle]="{ 'marginTop.px': 40 }"
      [options]="mainChart.options"
      [type]="mainChart.type"
      (chartRef)="handleChartRef($event)"
    >
      Main chart
    </c-chart>
  </c-card-body>


<!-- ููุฎุต ุงูููุฒุงููุฉ ุจุฑุณูู ุจูุงููุฉ -->
<c-card class="mb-4">
  <c-card-header>
    <strong>๐ ููุฎุต ุงูููุฒุงููุฉ</strong>
  </c-card-header>
  <c-card-body>
  <c-row>
    <!-- ุงูุฑุณู ุงูุจูุงูู -->
    <c-col md="6" class="mb-3">
      <div class="card h-100 border-0 shadow-sm">
        <div class="card-header bg-transparent border-bottom-0 pb-0">
          <h6 class="mb-0">ูุณุจุฉ ุชูุฒูุน ุงูููุฒุงููุฉ</h6>
          <div class="small text-body-secondary">ุงูุฃุตูู ููุงุจู ุงูุฎุตูู ูุฑุฃุณ ุงููุงู</div>
        </div>
        <div class="card-body">
          <canvas #budgetChart style="max-height: 300px;"></canvas>
        </div>
      </div>
    </c-col>

    <!-- ุชูุงุตูู ุงูุฃุฑูุงู -->
    <c-col md="6">
      <div class="card h-90 border-0 shadow-sm" >
        <div class="card-header bg-transparent border-bottom-0 pb-0">
          <h6 class="mb-0">ุงูููุฎุต ุงููุงูู</h6>
          <div class="small text-body-secondary">ุงููุถุน ุงูุนุงู ููููุฒุงููุฉ</div>
        </div>
        <div class="card-body">
          <ul class="list-group list-group-flush">
            <li class="list-group-item d-flex justify-content-between align-items-center">
              <div>
                <strong>ุงูุฃุตูู</strong>
                <div class="small text-body-secondary">ุฅุฌูุงูู ููุชููุงุช ุงูุดุฑูุฉ</div>
              </div>
              <span class="fw-bold text-success">{{ assets | currency:'EGP' }}</span>
            </li>
            <li class="list-group-item d-flex justify-content-between align-items-center">
              <div>
                <strong>ุงูุฎุตูู</strong>
                <div class="small text-body-secondary">ุงูุฏููู ูุงููุทููุจุงุช</div>
              </div>
              <span class="fw-bold text-danger">{{ liabilities | currency:'EGP' }}</span>
            </li>
            <li class="list-group-item d-flex justify-content-between align-items-center">
              <div>
                <strong>ุฑุฃุณ ุงููุงู</strong>
                <div class="small text-body-secondary">ุตุงูู ุงูุฃุตูู</div>
              </div>
              <span class="fw-bold text-primary">{{ equity | currency:'EGP' }}</span>
            </li>
          </ul>
        </div>
      </div>
    </c-col>
  </c-row>
</c-card-body>

</c-card>


<c-card class="mb-4">
  <c-card-header class="d-flex justify-content-between align-items-center flex-wrap gap-2">
    <strong>๐ ุณุฌู ุงููุนุงููุงุช ุงููุงููุฉ</strong>

    <div class="d-flex  flex-nowrap gap-2 align-items-center">
      

      <!-- ุญูู ุงูุจุญุซ -->
      <input
        type="text"
        class="form-control form-control-sm"
        placeholder="ุจุญุซ..."
        [(ngModel)]="searchText"
        style="min-width: 180px;"
      />

      <!-- ููุชุฑ ุงูููุน -->
      <select class="form-select form-select-sm" [(ngModel)]="transactionTypeFilter">
        <option value="">ุงููู</option>
        <option value="ุฅูุฑุงุฏ">ุฅูุฑุงุฏ</option>
        <option value="ูุตุฑูู">ูุตุฑูู</option>
      </select>

      <!-- ุฒุฑ ุงูุฅุถุงูุฉ -->
      <button class="btn btn-sm btn-success" (click)="addTransaction()">
        <svg cIcon name="cil-plus"></svg> 
      </button>

      <!-- ุฒุฑ ุงูุทุจุงุนุฉ -->
      <button class="btn btn-sm btn-outline-primary" (click)="printTransactions()">
        <svg cIcon name="cil-print"></svg> 
      </button>
    </div>
  </c-card-header>

  <c-card-body>
    <div class="table-responsive">
      <table class="table table-striped table-bordered align-middle text-center">
        <thead class="table-light">
          <tr>
            <th>ุงูุชุงุฑูุฎ</th>
            <th>ุงููุฆุฉ</th>
            <th>ุงููุตู</th>
            <th>ุงูููุน</th>
            <th>ุงููุจูุบ</th>
            <th>ุงูุฑุตูุฏ ุจุนุฏ ุงูุนูููุฉ</th>
            <th>ุงููุณุคูู</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let tx of filteredTransactions">
            <td>{{ tx.date }}</td>
            <td>{{ tx.category }}</td>
            <td class="text-start">{{ tx.description }}</td>
            <td>
              <c-badge [color]="tx.type === 'ุฅูุฑุงุฏ' ? 'success' : 'danger'">{{ tx.type }}</c-badge>
            </td>
            <td [ngClass]="{ 'text-success': tx.amount > 0, 'text-danger': tx.amount < 0 }">
              {{ tx.amount | currency:'EGP' }}
            </td>
            <td>{{ tx.balanceAfter | currency:'EGP' }}</td>
            <td>{{ tx.user }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </c-card-body>
</c-card>






<!-- TODO -->
<!-- <c-card class="mb-4">
  <c-card-header>
    <strong>๐งพ ุงูุฃูุณุงู ุงููุญุงุณุจูุฉ</strong>
  </c-card-header>
  <c-card-body>
    <div class="row">
      <div class="col-md-3 mb-3" *ngFor="let section of accountingSections">
        <div class="card shadow-sm h-100 border">
          <div class="card-body text-center">
            <div class="mb-2 fs-2">๐</div>
            <h6>{{ section.name }}</h6>
            <p class="text-muted small">{{ section.description }}</p>
            <button class="btn btn-outline-primary btn-sm">ุงูุฏุฎูู</button>
          </div>
        </div>
      </div>
    </div>
  </c-card-body>
</c-card>

<c-card>
  <c-card-header>
    <strong>๐ ุงูุชูุงุฑูุฑ ุงููุญุงุณุจูุฉ</strong>
  </c-card-header>
  <c-card-body>
    <div class="row">
      <div class="col-md-4 mb-3" *ngFor="let report of accountingReports">
        <div class="card border h-100">
          <div class="card-body">
            <h6>{{ report.name }}</h6>
            <p class="text-muted">{{ report.description }}</p>
            <button class="btn btn-sm btn-success">ุนุฑุถ ุงูุชูุฑูุฑ</button>
          </div>
        </div>
      </div>
    </div>
  </c-card-body>
</c-card> -->
